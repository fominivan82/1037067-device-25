var link = document.querySelector(".popup-button"),
    popup = document.querySelector(".feedback"),
    close = popup.querySelector(".feedback-close"),
    login = popup.querySelector(".feedback-username"),
    form = popup.querySelector(".feedback-popup"),
    email = popup.querySelector(".feedback-letter"),
    freetext = popup.querySelector(".feedback-freetext"),
    mapLink = document.querySelector(".map"),
    mapPopup = document.querySelector(".modal"),
    mapClose = mapPopup.querySelector(".modal-close");
link.addEventListener("click", function(e) { e.preventDefault(), popup.classList.add("feedback-show"), login.focus() }), close.addEventListener("click", function(e) { e.preventDefault(), popup.classList.remove("feedback-show"), popup.classList.remove("feedback-error") }), form.addEventListener("submit", function(e) { login.value && email.value && freetext.value || (e.preventDefault(), popup.classList.remove("feedback-error"), popup.offsetWidth = popup.offsetWidth, popup.classList.add("feedback-error")) }), window.addEventListener("keydown", function(e) { 27 === e.keyCode && (e.preventDefault(), popup.classList.contains("feedback-show") && (popup.classList.remove("feedback-show"), popup.classList.remove("feedback-error"))) }), mapLink.addEventListener("click", function(e) { e.preventDefault(), mapPopup.classList.add("modal-show") }), mapClose.addEventListener("click", function(e) { e.preventDefault(), mapPopup.classList.remove("modal-show") }), window.addEventListener("keydown", function(e) { 27 === e.keyCode && mapPopup.classList.contains("modal-show") && (e.preventDefault(), mapPopup.classList.remove("modal-show")) });